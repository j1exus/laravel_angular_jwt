!function(){"use strict";angular.module("app",["app.controllers","app.filters","app.services","app.directives","app.routes","app.config","app.run"]);angular.module("app.routes",["ui.router","satellizer"]),angular.module("app.controllers",["ngMaterial","ui.router","restangular","satellizer","ngMessages"]),angular.module("app.filters",[]),angular.module("app.services",[]),angular.module("app.directives",[]),angular.module("app.config",["ngMaterial"]),angular.module("app.run",["ui.router","satellizer"])}(),function(){"use strict";angular.module("app.routes").config(["$stateProvider","$urlRouterProvider","$authProvider","$locationProvider",function(e,t,r,a){r.loginUrl="/api/auth/login",r.signupUrl="/api/auth/register",a.html5Mode(!0);var o=function(e){return"/views/app/"+e+"/"+e+".html"};t.otherwise("/"),e.state("main",{url:"/",views:{header:{templateUrl:o("header")},main:{templateUrl:o("main")},footer:{templateUrl:o("footer")}},data:{requiredLogin:!0}}).state("login",{url:"/login",views:{main:{templateUrl:o("login")}},params:{message:null},data:{requiredLogin:!1}}).state("register",{url:"/register",views:{main:{templateUrl:o("register")}},data:{requiredLogin:!1}}).state("verificationsent",{views:{main:{templateUrl:o("verificationsent")}},data:{requiredLogin:!1}}).state("verify",{url:"/verify/:code",views:{main:{templateUrl:o("verify")}},data:{requiredLogin:!1}}).state("passwordrestore",{url:"/password/restore",views:{main:{templateUrl:o("passwordrestore")}},data:{requiredLogin:!1}}).state("passwordreset",{url:"/password/:code",views:{main:{templateUrl:o("passwordreset")}},data:{requiredLogin:!1}}),a.html5Mode(!0)}])}(),function(){"use strict";angular.module("app.config").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue-grey").accentPalette("cyan").warnPalette("red")}])}(),function(){"use strict";angular.module("app.run").run(["$rootScope","$state","$auth",function(e,t,r){e.$on("$stateChangeStart",function(e,a){var o=!1;a.data&&a.data.requiredLogin&&(o=!0),o&&!r.isAuthenticated()&&(e.preventDefault(),t.go("login")),!o&&r.isAuthenticated()&&(e.preventDefault(),t.go("main"))})}])}(),function(){"use strict";angular.module("app.services").factory("ToastService",["$mdToast",function(e){return{show:function(t){return t.content=t.content||null,t.delay=void 0===t.delay?6e3:t.delay,t.position=t.position||"top right",t.action=t.action||null,t.templateUrl=t.templateUrl||null,t.controller=t.controller||null,null===t.templateUrl?e.show(e.simple().content(t.content).position(t.position).action(t.action).hideDelay(t.delay)):e.show({hideDelay:t.delay,position:t.position,templateUrl:getToast(t.templateUrl),controller:t.controller,locals:{text:t.content}})}}}])}(),function(){"use strict";function e(e,t,r){e.logout=function(){t.logout(),r.go("login")};var a;e.openMenu=function(e,t){a=t,e(t)}}e.$inject=["$scope","$auth","$state"],angular.module("app.controllers").controller("HeaderController",e)}(),function(){"use strict";function e(e,t,r,a,o){e.user={},e.error=null;var n={};a.message&&(n.content=a.message,o.show(n)),e.login=function(){t.login(e.user).then(function(e){r.go("main")})["catch"](function(t){switch(t.status){case 401:e.error="Sorry, we couldn't find an account with provided username or password is wrong.";break;case 403:e.error="You account is not verified. Please, check your email. If you have any troubles - please, contact us.";break;case 500:e.error="Internal server error.";break;default:e.error="Something went wrong. Please, try again latter."}})}}e.$inject=["$scope","$auth","$state","$stateParams","ToastService"],angular.module("app.controllers").controller("AuthController",e)}(),function(){"use strict";function e(e,t,r,a){e.passwordReset=function(){e.User.token=r.code,console.log(e.User),a.all("api/auth/resetconfirm").post(e.User).then(function(e){t.go("login",{message:"Your password has been changed!"})})["catch"](function(t){switch(t.status){case 400:e.error="Invalid confirmation code.";break;default:e.error="Something went wrong. Please, try again latter."}})}}e.$inject=["$scope","$state","$stateParams","Restangular"],angular.module("app.controllers").controller("PasswordResetController",e)}(),function(){"use strict";function e(e,t,r,a){e.restoredUser={};e.restore=function(){a.all("api/auth/reset").post({email:e.restoredUser.email}).then(function(e){t.go("login",{message:"Message have been send. Please, check your email."})})["catch"](function(t){switch(t.status){case 400:e.error="Email not found.";break;default:e.error="Something went wrong. Please, try again latter."}})}}e.$inject=["$scope","$state","ToastService","Restangular"],angular.module("app.controllers").controller("RestoreController",e)}(),function(){"use strict";function e(e,t,r){e.newUser={},e.error=null,e.register=function(){e.error=null,t.signup(e.newUser).then(function(t){r.go("verificationsent",{email:e.newUser.email})})["catch"](function(t){switch(t.status){case 409:e.error="User with given email already exists.";break;case 500:e.error="Internal server error.";break;default:e.error="Something went wrong. Please, try again latter."}})}}e.$inject=["$scope","$auth","$state"],angular.module("app.controllers").controller("RegisterController",e)}(),function(){"use strict";function e(e,t,r,a){a.all("api/auth/verify").post({confirmationcode:r.code}).then(function(e){t.go("login",{message:"Thank you! You account has been activated!"})})["catch"](function(t){switch(t.status){case 400:e.error="Invalid confirmation code.";break;default:e.error="Something went wrong. Please, try again latter."}})}e.$inject=["$scope","$state","$stateParams","Restangular"],angular.module("app.controllers").controller("VerifyController",e)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJyb3V0ZXMuanMiLCJjb25maWcvdGhlbWUuanMiLCJydW4vcHJvdGVjdFJvdXRlcy5qcyIsInNlcnZpY2VzL3RvYXN0LmpzIiwiYXBwL2hlYWRlci9oZWFkZXIuanMiLCJhcHAuanMiLCJhcHAvbG9naW4vbG9naW4uanMiLCJhcHAvcGFzc3dvcmRyZXNldC9wYXNzd29yZHJlc2V0LmpzIiwiYXBwL3Bhc3N3b3JkcmVzdG9yZS9wYXNzd29yZHJlc3RvcmUuanMiLCJhcHAvcmVnaXN0ZXIvcmVnaXN0ZXIuanMiLCJhcHAvdmVyaWZ5L3ZlcmlmeS5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHN0YXRlUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCIkYXV0aFByb3ZpZGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCJsb2dpblVybCIsInNpZ251cFVybCIsImh0bWw1TW9kZSIsImdldFZpZXciLCJ2aWV3TmFtZSIsIm90aGVyd2lzZSIsInN0YXRlIiwidXJsIiwidmlld3MiLCJoZWFkZXIiLCJ0ZW1wbGF0ZVVybCIsIm1haW4iLCJmb290ZXIiLCJkYXRhIiwicmVxdWlyZWRMb2dpbiIsInBhcmFtcyIsIm1lc3NhZ2UiLCIkbWRUaGVtaW5nUHJvdmlkZXIiLCJ0aGVtZSIsInByaW1hcnlQYWxldHRlIiwiYWNjZW50UGFsZXR0ZSIsIndhcm5QYWxldHRlIiwicnVuIiwiJHJvb3RTY29wZSIsIiRzdGF0ZSIsIiRhdXRoIiwiJG9uIiwiZXZlbnQiLCJ0b1N0YXRlIiwiaXNBdXRoZW50aWNhdGVkIiwicHJldmVudERlZmF1bHQiLCJnbyIsImZhY3RvcnkiLCIkbWRUb2FzdCIsInNob3ciLCJjb250ZW50IiwiZGVsYXkiLCJ1bmRlZmluZWQiLCJwb3NpdGlvbiIsImFjdGlvbiIsImNvbnRyb2xsZXIiLCJzaW1wbGUiLCJoaWRlRGVsYXkiLCJnZXRUb2FzdCIsImxvY2FscyIsInRleHQiLCJIZWFkZXJDb250cm9sbGVyIiwiJHNjb3BlIiwibG9nb3V0Iiwib3JpZ2luYXRvckV2Iiwib3Blbk1lbnUiLCIkbWRPcGVuTWVudSIsImV2IiwiJGluamVjdCIsIkF1dGhDb250cm9sbGVyIiwiJHN0YXRlUGFyYW1zIiwiVG9hc3RTZXJ2aWNlIiwidXNlciIsImVycm9yIiwidG9hc3QiLCJsb2dpbiIsInRoZW4iLCJyZXNwb25zZSIsInN0YXR1cyIsIlBhc3N3b3JkUmVzZXRDb250cm9sbGVyIiwiUmVzdGFuZ3VsYXIiLCJwYXNzd29yZFJlc2V0IiwiVXNlciIsInRva2VuIiwiY29kZSIsImNvbnNvbGUiLCJsb2ciLCJhbGwiLCJwb3N0IiwiUmVzdG9yZUNvbnRyb2xsZXIiLCJyZXN0b3JlZFVzZXIiLCJyZXN0b3JlIiwiZW1haWwiLCJSZWdpc3RlckNvbnRyb2xsZXIiLCJuZXdVc2VyIiwicmVnaXN0ZXIiLCJzaWdudXAiLCJWZXJpZnlDb250cm9sbGVyIiwiY29uZmlybWF0aW9uY29kZSJdLCJtYXBwaW5ncyI6IkNBQUEsV0FDQSxZQUVBQSxTQUFBQyxPQUFBLE9BRUEsa0JBQ0EsY0FDQSxlQUNBLGlCQUNBLGFBQ0EsYUFDQSxXQUdBRCxTQUFBQyxPQUFBLGNBQUEsWUFBQSxlQUNBRCxRQUFBQyxPQUFBLG1CQUFBLGFBQUEsWUFBQSxjQUFBLGFBQUEsZUFDQUQsUUFBQUMsT0FBQSxrQkFDQUQsUUFBQUMsT0FBQSxtQkFDQUQsUUFBQUMsT0FBQSxxQkFDQUQsUUFBQUMsT0FBQSxjQUFBLGVBQ0FELFFBQUFDLE9BQUEsV0FBQSxZQUFBLGtCQ3BCQSxXQUNBLFlBRUFELFNBQUFDLE9BQUEsY0FBQUMsUUFBQSxpQkFBQSxxQkFBQSxnQkFBQSxvQkFBQSxTQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUVBRCxFQUFBRSxTQUFBLGtCQUNBRixFQUFBRyxVQUFBLHFCQUNBRixFQUFBRyxXQUFBLEVBQ0EsSUFBQUMsR0FBQSxTQUFBQyxHQUNBLE1BQUEsY0FBQUEsRUFBQSxJQUFBQSxFQUFBLFFBR0FQLEdBQUFRLFVBQUEsS0FFQVQs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MEMiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uICgpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIHZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJyxcclxuICAgICAgICBbXHJcbiAgICAgICAgICAgICdhcHAuY29udHJvbGxlcnMnLFxyXG4gICAgICAgICAgICAnYXBwLmZpbHRlcnMnLFxyXG4gICAgICAgICAgICAnYXBwLnNlcnZpY2VzJyxcclxuICAgICAgICAgICAgJ2FwcC5kaXJlY3RpdmVzJyxcclxuICAgICAgICAgICAgJ2FwcC5yb3V0ZXMnLFxyXG4gICAgICAgICAgICAnYXBwLmNvbmZpZycsXHJcbiAgICAgICAgICAgICdhcHAucnVuJ1xyXG4gICAgICAgIF0pO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAucm91dGVzJywgWyd1aS5yb3V0ZXInLCAnc2F0ZWxsaXplciddKTtcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAuY29udHJvbGxlcnMnLCBbJ25nTWF0ZXJpYWwnLCAndWkucm91dGVyJywgJ3Jlc3Rhbmd1bGFyJywgJ3NhdGVsbGl6ZXInLCAnbmdNZXNzYWdlcyddKTtcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAuZmlsdGVycycsIFtdKTtcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAuc2VydmljZXMnLCBbXSk7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLmRpcmVjdGl2ZXMnLCBbXSk7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLmNvbmZpZycsIFsnbmdNYXRlcmlhbCddKTtcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAucnVuJywgWyd1aS5yb3V0ZXInLCAnc2F0ZWxsaXplciddKTtcclxuXHJcbn0pKCk7ICIsIihmdW5jdGlvbiAoKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLnJvdXRlcycpLmNvbmZpZyhmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlciwgJGF1dGhQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIpIHtcclxuXHJcbiAgICAgICAgJGF1dGhQcm92aWRlci5sb2dpblVybCA9ICcvYXBpL2F1dGgvbG9naW4nO1xyXG4gICAgICAgICRhdXRoUHJvdmlkZXIuc2lnbnVwVXJsID0gJy9hcGkvYXV0aC9yZWdpc3Rlcic7XHJcbiAgICAgICAgJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHRydWUpO1xyXG4gICAgICAgIHZhciBnZXRWaWV3ID0gZnVuY3Rpb24gKHZpZXdOYW1lKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnL3ZpZXdzL2FwcC8nICsgdmlld05hbWUgKyAnLycgKyB2aWV3TmFtZSArICcuaHRtbCc7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnLycpO1xyXG5cclxuICAgICAgICAkc3RhdGVQcm92aWRlclxyXG4gICAgICAgICAgICAuc3RhdGUoJ21haW4nLCB7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvJyxcclxuICAgICAgICAgICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBnZXRWaWV3KCdoZWFkZXInKVxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgbWFpbjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogZ2V0VmlldygnbWFpbicpXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBmb290ZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6IGdldFZpZXcoJ2Zvb3RlcicpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGRhdGE6IHtyZXF1aXJlZExvZ2luOiB0cnVlfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ2xvZ2luJywge1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL2xvZ2luJyxcclxuICAgICAgICAgICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFpbjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogZ2V0VmlldygnbG9naW4nKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHtcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBudWxsIC8vbWVzc2FnZSB0byBkaXNwbGF5IGluIHRvYXN0LCBmb3IgZXhhbXBsZSBhYm91dCBzdWNjZXNzZnVsbCB2ZXJpZmljYXRpb25cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWRMb2dpbjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgncmVnaXN0ZXInLCB7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvcmVnaXN0ZXInLFxyXG4gICAgICAgICAgICAgICAgdmlld3M6IHtcclxuICAgICAgICAgICAgICAgICAgICBtYWluOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBnZXRWaWV3KCdyZWdpc3RlcicpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGRhdGE6IHtyZXF1aXJlZExvZ2luOiBmYWxzZX1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCd2ZXJpZmljYXRpb25zZW50Jywge1xyXG4gICAgICAgICAgICAgICAgdmlld3M6IHtcclxuICAgICAgICAgICAgICAgICAgICBtYWluOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBnZXRWaWV3KCd2ZXJpZmljYXRpb25zZW50JylcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZGF0YToge3JlcXVpcmVkTG9naW46IGZhbHNlfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ3ZlcmlmeScsIHtcclxuICAgICAgICAgICAgICAgIHVybDogJy92ZXJpZnkvOmNvZGUnLFxyXG4gICAgICAgICAgICAgICAgdmlld3M6IHtcclxuICAgICAgICAgICAgICAgICAgICBtYWluOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBnZXRWaWV3KCd2ZXJpZnknKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7cmVxdWlyZWRMb2dpbjogZmFsc2V9LFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ3Bhc3N3b3JkcmVzdG9yZScsIHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9wYXNzd29yZC9yZXN0b3JlJyxcclxuICAgICAgICAgICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFpbjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogZ2V0VmlldygncGFzc3dvcmRyZXN0b3JlJylcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZGF0YToge3JlcXVpcmVkTG9naW46IGZhbHNlfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ3Bhc3N3b3JkcmVzZXQnLCB7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvcGFzc3dvcmQvOmNvZGUnLFxyXG4gICAgICAgICAgICAgICAgdmlld3M6IHtcclxuICAgICAgICAgICAgICAgICAgICBtYWluOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBnZXRWaWV3KCdwYXNzd29yZHJlc2V0JylcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZGF0YToge3JlcXVpcmVkTG9naW46IGZhbHNlfSxcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTtcclxuXHJcbiAgICB9KTtcclxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5jb25maWcnKS5jb25maWcoZnVuY3Rpb24gKCRtZFRoZW1pbmdQcm92aWRlcikge1xyXG4gICAgICAgIC8qIEZvciBtb3JlIGluZm8sIHZpc2l0IGh0dHBzOi8vbWF0ZXJpYWwuYW5ndWxhcmpzLm9yZy8jL1RoZW1pbmcvMDFfaW50cm9kdWN0aW9uICovXHJcbiAgICAgICAgJG1kVGhlbWluZ1Byb3ZpZGVyLnRoZW1lKCdkZWZhdWx0JylcclxuICAgICAgICAgICAgLnByaW1hcnlQYWxldHRlKCdibHVlLWdyZXknKVxyXG4gICAgICAgICAgICAuYWNjZW50UGFsZXR0ZSgnY3lhbicpXHJcbiAgICAgICAgICAgIC53YXJuUGFsZXR0ZSgncmVkJyk7XHJcbiAgICB9KTtcclxuXHJcbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAucnVuJykucnVuKGZ1bmN0aW9uICgkcm9vdFNjb3BlLCAkc3RhdGUsICRhdXRoKSB7XHJcbiAgICAgICAgJHJvb3RTY29wZS4kb24oJyRzdGF0ZUNoYW5nZVN0YXJ0JyxcclxuICAgICAgICAgICAgZnVuY3Rpb24gKGV2ZW50LCB0b1N0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVxdWlyZWRMb2dpbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgdGhpcyBzdGF0ZSBuZWVkIGxvZ2luXHJcbiAgICAgICAgICAgICAgICBpZiAodG9TdGF0ZS5kYXRhICYmIHRvU3RhdGUuZGF0YS5yZXF1aXJlZExvZ2luKVxyXG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkTG9naW4gPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIGlmIHllcyBhbmQgaWYgdGhpcyB1c2VyIGlzIG5vdCBsb2dnZWQgaW4sIHJlZGlyZWN0IGhpbSB0byBsb2dpbiBwYWdlXHJcbiAgICAgICAgICAgICAgICBpZiAocmVxdWlyZWRMb2dpbiAmJiAhJGF1dGguaXNBdXRoZW50aWNhdGVkKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnbG9naW4nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIGlmIG5vIGFuZCBpZiB0aGlzIHVzZXIgaXMgbG9nZ2VkIGluLCByZWRpcmVjdCBoaW0gdG8gbWFpbiBwYWdlXHJcbiAgICAgICAgICAgICAgICBpZiAoIXJlcXVpcmVkTG9naW4gJiYgJGF1dGguaXNBdXRoZW50aWNhdGVkKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnbWFpbicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcblxyXG59KSgpO1xyXG4iLCIoZnVuY3Rpb24gKCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoXCJhcHAuc2VydmljZXNcIikuZmFjdG9yeSgnVG9hc3RTZXJ2aWNlJywgZnVuY3Rpb24gKCRtZFRvYXN0KSB7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHNob3c6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhLmNvbnRlbnQgPSBkYXRhLmNvbnRlbnQgfHwgbnVsbDtcclxuICAgICAgICAgICAgICAgIGRhdGEuZGVsYXkgPSAoZGF0YS5kZWxheSA9PT0gdW5kZWZpbmVkKSA/IDYwMDAgOiBkYXRhLmRlbGF5O1xyXG4gICAgICAgICAgICAgICAgZGF0YS5wb3NpdGlvbiA9IGRhdGEucG9zaXRpb24gfHwgJ3RvcCByaWdodCc7XHJcbiAgICAgICAgICAgICAgICBkYXRhLmFjdGlvbiA9IGRhdGEuYWN0aW9uIHx8IG51bGw7XHJcbiAgICAgICAgICAgICAgICBkYXRhLnRlbXBsYXRlVXJsID0gZGF0YS50ZW1wbGF0ZVVybCB8fCBudWxsO1xyXG4gICAgICAgICAgICAgICAgZGF0YS5jb250cm9sbGVyID0gZGF0YS5jb250cm9sbGVyIHx8IG51bGw7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEudGVtcGxhdGVVcmwgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJG1kVG9hc3Quc2hvdyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgJG1kVG9hc3Quc2ltcGxlKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jb250ZW50KGRhdGEuY29udGVudClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wb3NpdGlvbihkYXRhLnBvc2l0aW9uKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFjdGlvbihkYXRhLmFjdGlvbilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5oaWRlRGVsYXkoZGF0YS5kZWxheSlcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJG1kVG9hc3Quc2hvdyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVEZWxheTogZGF0YS5kZWxheSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGRhdGEucG9zaXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBnZXRUb2FzdChkYXRhLnRlbXBsYXRlVXJsKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogZGF0YS5jb250cm9sbGVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhbHM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGRhdGEuY29udGVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfSk7XHJcbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5jb250cm9sbGVycycpLmNvbnRyb2xsZXIoJ0hlYWRlckNvbnRyb2xsZXInLCBIZWFkZXJDb250cm9sbGVyKTtcclxuICAgIGZ1bmN0aW9uIEhlYWRlckNvbnRyb2xsZXIoJHNjb3BlLCAkYXV0aCwgJHN0YXRlKSB7XHJcblxyXG4gICAgICAgICRzY29wZS5sb2dvdXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRhdXRoLmxvZ291dCgpO1xyXG4gICAgICAgICAgICAkc3RhdGUuZ28oJ2xvZ2luJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgb3JpZ2luYXRvckV2O1xyXG4gICAgICAgICRzY29wZS5vcGVuTWVudSA9IGZ1bmN0aW9uICgkbWRPcGVuTWVudSwgZXYpIHtcclxuICAgICAgICAgICAgb3JpZ2luYXRvckV2ID0gZXY7XHJcbiAgICAgICAgICAgICRtZE9wZW5NZW51KGV2KTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgdmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnLFxyXG4gICAgICAgIFtcclxuICAgICAgICAgICAgJ2FwcC5jb250cm9sbGVycycsXHJcbiAgICAgICAgICAgICdhcHAuZmlsdGVycycsXHJcbiAgICAgICAgICAgICdhcHAuc2VydmljZXMnLFxyXG4gICAgICAgICAgICAnYXBwLmRpcmVjdGl2ZXMnLFxyXG4gICAgICAgICAgICAnYXBwLnJvdXRlcycsXHJcbiAgICAgICAgICAgICdhcHAuY29uZmlnJyxcclxuICAgICAgICAgICAgJ2FwcC5ydW4nXHJcbiAgICAgICAgXSk7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5yb3V0ZXMnLCBbJ3VpLnJvdXRlcicsICdzYXRlbGxpemVyJ10pO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5jb250cm9sbGVycycsIFsnbmdNYXRlcmlhbCcsICd1aS5yb3V0ZXInLCAncmVzdGFuZ3VsYXInLCAnc2F0ZWxsaXplcicsICduZ01lc3NhZ2VzJ10pO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5maWx0ZXJzJywgW10pO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5zZXJ2aWNlcycsIFtdKTtcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAuZGlyZWN0aXZlcycsIFtdKTtcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAuY29uZmlnJywgWyduZ01hdGVyaWFsJ10pO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5ydW4nLCBbJ3VpLnJvdXRlcicsICdzYXRlbGxpemVyJ10pO1xyXG5cclxufSkoKTsgXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5yb3V0ZXMnKS5jb25maWcoW1wiJHN0YXRlUHJvdmlkZXJcIiwgXCIkdXJsUm91dGVyUHJvdmlkZXJcIiwgXCIkYXV0aFByb3ZpZGVyXCIsIFwiJGxvY2F0aW9uUHJvdmlkZXJcIiwgZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIsICRhdXRoUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyKSB7XHJcblxyXG4gICAgICAgICRhdXRoUHJvdmlkZXIubG9naW5VcmwgPSAnL2FwaS9hdXRoL2xvZ2luJztcclxuICAgICAgICAkYXV0aFByb3ZpZGVyLnNpZ251cFVybCA9ICcvYXBpL2F1dGgvcmVnaXN0ZXInO1xyXG4gICAgICAgICRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTtcclxuICAgICAgICB2YXIgZ2V0VmlldyA9IGZ1bmN0aW9uICh2aWV3TmFtZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gJy92aWV3cy9hcHAvJyArIHZpZXdOYW1lICsgJy8nICsgdmlld05hbWUgKyAnLmh0bWwnO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy8nKTtcclxuXHJcbiAgICAgICAgJHN0YXRlUHJvdmlkZXJcclxuICAgICAgICAgICAgLnN0YXRlKCdtYWluJywge1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnLycsXHJcbiAgICAgICAgICAgICAgICB2aWV3czoge1xyXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogZ2V0VmlldygnaGVhZGVyJylcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIG1haW46IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6IGdldFZpZXcoJ21haW4nKVxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZm9vdGVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBnZXRWaWV3KCdmb290ZXInKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7cmVxdWlyZWRMb2dpbjogdHJ1ZX1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdsb2dpbicsIHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9sb2dpbicsXHJcbiAgICAgICAgICAgICAgICB2aWV3czoge1xyXG4gICAgICAgICAgICAgICAgICAgIG1haW46IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6IGdldFZpZXcoJ2xvZ2luJylcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgcGFyYW1zOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogbnVsbCAvL21lc3NhZ2UgdG8gZGlzcGxheSBpbiB0b2FzdCwgZm9yIGV4YW1wbGUgYWJvdXQgc3VjY2Vzc2Z1bGwgdmVyaWZpY2F0aW9uXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkTG9naW46IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ3JlZ2lzdGVyJywge1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL3JlZ2lzdGVyJyxcclxuICAgICAgICAgICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFpbjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogZ2V0VmlldygncmVnaXN0ZXInKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7cmVxdWlyZWRMb2dpbjogZmFsc2V9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgndmVyaWZpY2F0aW9uc2VudCcsIHtcclxuICAgICAgICAgICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFpbjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogZ2V0VmlldygndmVyaWZpY2F0aW9uc2VudCcpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGRhdGE6IHtyZXF1aXJlZExvZ2luOiBmYWxzZX1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCd2ZXJpZnknLCB7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvdmVyaWZ5Lzpjb2RlJyxcclxuICAgICAgICAgICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFpbjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogZ2V0VmlldygndmVyaWZ5JylcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZGF0YToge3JlcXVpcmVkTG9naW46IGZhbHNlfSxcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdwYXNzd29yZHJlc3RvcmUnLCB7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvcGFzc3dvcmQvcmVzdG9yZScsXHJcbiAgICAgICAgICAgICAgICB2aWV3czoge1xyXG4gICAgICAgICAgICAgICAgICAgIG1haW46IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6IGdldFZpZXcoJ3Bhc3N3b3JkcmVzdG9yZScpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGRhdGE6IHtyZXF1aXJlZExvZ2luOiBmYWxzZX1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdwYXNzd29yZHJlc2V0Jywge1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL3Bhc3N3b3JkLzpjb2RlJyxcclxuICAgICAgICAgICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFpbjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogZ2V0VmlldygncGFzc3dvcmRyZXNldCcpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGRhdGE6IHtyZXF1aXJlZExvZ2luOiBmYWxzZX0sXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XHJcblxyXG4gICAgfV0pO1xyXG59KSgpO1xuKGZ1bmN0aW9uICgpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAuY29uZmlnJykuY29uZmlnKFtcIiRtZFRoZW1pbmdQcm92aWRlclwiLCBmdW5jdGlvbiAoJG1kVGhlbWluZ1Byb3ZpZGVyKSB7XHJcbiAgICAgICAgLyogRm9yIG1vcmUgaW5mbywgdmlzaXQgaHR0cHM6Ly9tYXRlcmlhbC5hbmd1bGFyanMub3JnLyMvVGhlbWluZy8wMV9pbnRyb2R1Y3Rpb24gKi9cclxuICAgICAgICAkbWRUaGVtaW5nUHJvdmlkZXIudGhlbWUoJ2RlZmF1bHQnKVxyXG4gICAgICAgICAgICAucHJpbWFyeVBhbGV0dGUoJ2JsdWUtZ3JleScpXHJcbiAgICAgICAgICAgIC5hY2NlbnRQYWxldHRlKCdjeWFuJylcclxuICAgICAgICAgICAgLndhcm5QYWxldHRlKCdyZWQnKTtcclxuICAgIH1dKTtcclxuXHJcbn0pKCk7XG4oZnVuY3Rpb24gKCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5ydW4nKS5ydW4oW1wiJHJvb3RTY29wZVwiLCBcIiRzdGF0ZVwiLCBcIiRhdXRoXCIsIGZ1bmN0aW9uICgkcm9vdFNjb3BlLCAkc3RhdGUsICRhdXRoKSB7XHJcbiAgICAgICAgJHJvb3RTY29wZS4kb24oJyRzdGF0ZUNoYW5nZVN0YXJ0JyxcclxuICAgICAgICAgICAgZnVuY3Rpb24gKGV2ZW50LCB0b1N0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVxdWlyZWRMb2dpbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgdGhpcyBzdGF0ZSBuZWVkIGxvZ2luXHJcbiAgICAgICAgICAgICAgICBpZiAodG9TdGF0ZS5kYXRhICYmIHRvU3RhdGUuZGF0YS5yZXF1aXJlZExvZ2luKVxyXG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkTG9naW4gPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIGlmIHllcyBhbmQgaWYgdGhpcyB1c2VyIGlzIG5vdCBsb2dnZWQgaW4sIHJlZGlyZWN0IGhpbSB0byBsb2dpbiBwYWdlXHJcbiAgICAgICAgICAgICAgICBpZiAocmVxdWlyZWRMb2dpbiAmJiAhJGF1dGguaXNBdXRoZW50aWNhdGVkKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnbG9naW4nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIGlmIG5vIGFuZCBpZiB0aGlzIHVzZXIgaXMgbG9nZ2VkIGluLCByZWRpcmVjdCBoaW0gdG8gbWFpbiBwYWdlXHJcbiAgICAgICAgICAgICAgICBpZiAoIXJlcXVpcmVkTG9naW4gJiYgJGF1dGguaXNBdXRoZW50aWNhdGVkKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnbWFpbicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XSk7XHJcblxyXG5cclxufSkoKTtcclxuXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoXCJhcHAuc2VydmljZXNcIikuZmFjdG9yeSgnVG9hc3RTZXJ2aWNlJywgW1wiJG1kVG9hc3RcIiwgZnVuY3Rpb24gKCRtZFRvYXN0KSB7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHNob3c6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhLmNvbnRlbnQgPSBkYXRhLmNvbnRlbnQgfHwgbnVsbDtcclxuICAgICAgICAgICAgICAgIGRhdGEuZGVsYXkgPSAoZGF0YS5kZWxheSA9PT0gdW5kZWZpbmVkKSA/IDYwMDAgOiBkYXRhLmRlbGF5O1xyXG4gICAgICAgICAgICAgICAgZGF0YS5wb3NpdGlvbiA9IGRhdGEucG9zaXRpb24gfHwgJ3RvcCByaWdodCc7XHJcbiAgICAgICAgICAgICAgICBkYXRhLmFjdGlvbiA9IGRhdGEuYWN0aW9uIHx8IG51bGw7XHJcbiAgICAgICAgICAgICAgICBkYXRhLnRlbXBsYXRlVXJsID0gZGF0YS50ZW1wbGF0ZVVybCB8fCBudWxsO1xyXG4gICAgICAgICAgICAgICAgZGF0YS5jb250cm9sbGVyID0gZGF0YS5jb250cm9sbGVyIHx8IG51bGw7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEudGVtcGxhdGVVcmwgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJG1kVG9hc3Quc2hvdyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgJG1kVG9hc3Quc2ltcGxlKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jb250ZW50KGRhdGEuY29udGVudClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wb3NpdGlvbihkYXRhLnBvc2l0aW9uKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFjdGlvbihkYXRhLmFjdGlvbilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5oaWRlRGVsYXkoZGF0YS5kZWxheSlcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJG1kVG9hc3Quc2hvdyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVEZWxheTogZGF0YS5kZWxheSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGRhdGEucG9zaXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBnZXRUb2FzdChkYXRhLnRlbXBsYXRlVXJsKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogZGF0YS5jb250cm9sbGVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhbHM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGRhdGEuY29udGVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfV0pO1xyXG59KSgpO1xuKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgSGVhZGVyQ29udHJvbGxlci4kaW5qZWN0ID0gW1wiJHNjb3BlXCIsIFwiJGF1dGhcIiwgXCIkc3RhdGVcIl07XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLmNvbnRyb2xsZXJzJykuY29udHJvbGxlcignSGVhZGVyQ29udHJvbGxlcicsIEhlYWRlckNvbnRyb2xsZXIpO1xyXG4gICAgZnVuY3Rpb24gSGVhZGVyQ29udHJvbGxlcigkc2NvcGUsICRhdXRoLCAkc3RhdGUpIHtcclxuXHJcbiAgICAgICAgJHNjb3BlLmxvZ291dCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJGF1dGgubG9nb3V0KCk7XHJcbiAgICAgICAgICAgICRzdGF0ZS5nbygnbG9naW4nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBvcmlnaW5hdG9yRXY7XHJcbiAgICAgICAgJHNjb3BlLm9wZW5NZW51ID0gZnVuY3Rpb24gKCRtZE9wZW5NZW51LCBldikge1xyXG4gICAgICAgICAgICBvcmlnaW5hdG9yRXYgPSBldjtcclxuICAgICAgICAgICAgJG1kT3Blbk1lbnUoZXYpO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG59KSgpO1xuKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgQXV0aENvbnRyb2xsZXIuJGluamVjdCA9IFtcIiRzY29wZVwiLCBcIiRhdXRoXCIsIFwiJHN0YXRlXCIsIFwiJHN0YXRlUGFyYW1zXCIsIFwiVG9hc3RTZXJ2aWNlXCJdO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5jb250cm9sbGVycycpLmNvbnRyb2xsZXIoJ0F1dGhDb250cm9sbGVyJywgQXV0aENvbnRyb2xsZXIpO1xyXG4gICAgZnVuY3Rpb24gQXV0aENvbnRyb2xsZXIoJHNjb3BlLCAkYXV0aCwgJHN0YXRlLCAkc3RhdGVQYXJhbXMsIFRvYXN0U2VydmljZSkge1xyXG5cclxuICAgICAgICAkc2NvcGUudXNlciA9IHt9O1xyXG4gICAgICAgICRzY29wZS5lcnJvciA9IG51bGw7XHJcbiAgICAgICAgdmFyIHRvYXN0ID0ge307XHJcblxyXG4gICAgICAgIGlmICgkc3RhdGVQYXJhbXMubWVzc2FnZSkge1xyXG4gICAgICAgICAgICB0b2FzdC5jb250ZW50ID0gJHN0YXRlUGFyYW1zLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgIFRvYXN0U2VydmljZS5zaG93KHRvYXN0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRzY29wZS5sb2dpbiA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICRhdXRoLmxvZ2luKCRzY29wZS51c2VyKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdtYWluJyk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAocmVzcG9uc2Uuc3RhdHVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yID0gXCJTb3JyeSwgd2UgY291bGRuJ3QgZmluZCBhbiBhY2NvdW50IHdpdGggcHJvdmlkZWQgdXNlcm5hbWUgb3IgcGFzc3dvcmQgaXMgd3JvbmcuXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0MDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3IgPSBcIllvdSBhY2NvdW50IGlzIG5vdCB2ZXJpZmllZC4gUGxlYXNlLCBjaGVjayB5b3VyIGVtYWlsLiBJZiB5b3UgaGF2ZSBhbnkgdHJvdWJsZXMgLSBwbGVhc2UsIGNvbnRhY3QgdXMuXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1MDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3IgPSBcIkludGVybmFsIHNlcnZlciBlcnJvci5cIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yID0gXCJTb21ldGhpbmcgd2VudCB3cm9uZy4gUGxlYXNlLCB0cnkgYWdhaW4gbGF0dGVyLlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG59KSgpO1xuKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgUGFzc3dvcmRSZXNldENvbnRyb2xsZXIuJGluamVjdCA9IFtcIiRzY29wZVwiLCBcIiRzdGF0ZVwiLCBcIiRzdGF0ZVBhcmFtc1wiLCBcIlJlc3Rhbmd1bGFyXCJdO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5jb250cm9sbGVycycpLmNvbnRyb2xsZXIoJ1Bhc3N3b3JkUmVzZXRDb250cm9sbGVyJywgUGFzc3dvcmRSZXNldENvbnRyb2xsZXIpO1xyXG4gICAgZnVuY3Rpb24gUGFzc3dvcmRSZXNldENvbnRyb2xsZXIoJHNjb3BlLCAkc3RhdGUsICRzdGF0ZVBhcmFtcywgUmVzdGFuZ3VsYXIpIHtcclxuXHJcbiAgICAgICAgJHNjb3BlLnBhc3N3b3JkUmVzZXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5Vc2VyLnRva2VuID0gJHN0YXRlUGFyYW1zLmNvZGU7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5Vc2VyKTtcclxuICAgICAgICAgICAgUmVzdGFuZ3VsYXIuYWxsKCdhcGkvYXV0aC9yZXNldGNvbmZpcm0nKS5wb3N0KCRzY29wZS5Vc2VyKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2xvZ2luJywge21lc3NhZ2U6ICdZb3VyIHBhc3N3b3JkIGhhcyBiZWVuIGNoYW5nZWQhJ30pO1xyXG5cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChyZXNwb25zZS5zdGF0dXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0MDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3IgPSBcIkludmFsaWQgY29uZmlybWF0aW9uIGNvZGUuXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvciA9IFwiU29tZXRoaW5nIHdlbnQgd3JvbmcuIFBsZWFzZSwgdHJ5IGFnYWluIGxhdHRlci5cIjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxufSkoKTtcbihmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIFJlc3RvcmVDb250cm9sbGVyLiRpbmplY3QgPSBbXCIkc2NvcGVcIiwgXCIkc3RhdGVcIiwgXCJUb2FzdFNlcnZpY2VcIiwgXCJSZXN0YW5ndWxhclwiXTtcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAuY29udHJvbGxlcnMnKS5jb250cm9sbGVyKCdSZXN0b3JlQ29udHJvbGxlcicsIFJlc3RvcmVDb250cm9sbGVyKTtcclxuICAgIGZ1bmN0aW9uIFJlc3RvcmVDb250cm9sbGVyKCRzY29wZSwgJHN0YXRlLCBUb2FzdFNlcnZpY2UsIFJlc3Rhbmd1bGFyKSB7XHJcblxyXG4gICAgICAgICRzY29wZS5yZXN0b3JlZFVzZXIgPSB7fTtcclxuICAgICAgICB2YXIgdG9hc3QgPSB7fTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnJlc3RvcmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIFJlc3Rhbmd1bGFyLmFsbCgnYXBpL2F1dGgvcmVzZXQnKS5wb3N0KHtlbWFpbDogJHNjb3BlLnJlc3RvcmVkVXNlci5lbWFpbH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnbG9naW4nLCB7bWVzc2FnZTogJ01lc3NhZ2UgaGF2ZSBiZWVuIHNlbmQuIFBsZWFzZSwgY2hlY2sgeW91ciBlbWFpbC4nfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHJlc3BvbnNlLnN0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQwMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvciA9IFwiRW1haWwgbm90IGZvdW5kLlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3IgPSBcIlNvbWV0aGluZyB3ZW50IHdyb25nLiBQbGVhc2UsIHRyeSBhZ2FpbiBsYXR0ZXIuXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KSgpO1xuKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgUmVnaXN0ZXJDb250cm9sbGVyLiRpbmplY3QgPSBbXCIkc2NvcGVcIiwgXCIkYXV0aFwiLCBcIiRzdGF0ZVwiXTtcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAuY29udHJvbGxlcnMnKS5jb250cm9sbGVyKCdSZWdpc3RlckNvbnRyb2xsZXInLCBSZWdpc3RlckNvbnRyb2xsZXIpO1xyXG4gICAgZnVuY3Rpb24gUmVnaXN0ZXJDb250cm9sbGVyKCRzY29wZSwgJGF1dGgsICRzdGF0ZSkgeyAvLywgVG9hc3RTZXJ2aWNlXHJcblxyXG4gICAgICAgICRzY29wZS5uZXdVc2VyID0ge307XHJcbiAgICAgICAgJHNjb3BlLmVycm9yID0gbnVsbDtcclxuXHJcbiAgICAgICAgJHNjb3BlLnJlZ2lzdGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuZXJyb3IgPSBudWxsO1xyXG4gICAgICAgICAgICAkYXV0aC5zaWdudXAoJHNjb3BlLm5ld1VzZXIpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygndmVyaWZpY2F0aW9uc2VudCcsIHsnZW1haWwnOiAkc2NvcGUubmV3VXNlci5lbWFpbH0pO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHJlc3BvbnNlLnN0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQwOTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvciA9IFwiVXNlciB3aXRoIGdpdmVuIGVtYWlsIGFscmVhZHkgZXhpc3RzLlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNTAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yID0gXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3IuXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvciA9IFwiU29tZXRoaW5nIHdlbnQgd3JvbmcuIFBsZWFzZSwgdHJ5IGFnYWluIGxhdHRlci5cIjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59KSgpO1xuKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgVmVyaWZ5Q29udHJvbGxlci4kaW5qZWN0ID0gW1wiJHNjb3BlXCIsIFwiJHN0YXRlXCIsIFwiJHN0YXRlUGFyYW1zXCIsIFwiUmVzdGFuZ3VsYXJcIl07XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLmNvbnRyb2xsZXJzJykuY29udHJvbGxlcignVmVyaWZ5Q29udHJvbGxlcicsIFZlcmlmeUNvbnRyb2xsZXIpO1xyXG4gICAgZnVuY3Rpb24gVmVyaWZ5Q29udHJvbGxlcigkc2NvcGUsICRzdGF0ZSwgJHN0YXRlUGFyYW1zLCBSZXN0YW5ndWxhcikge1xyXG5cclxuICAgICAgICBSZXN0YW5ndWxhci5hbGwoJ2FwaS9hdXRoL3ZlcmlmeScpLnBvc3Qoe2NvbmZpcm1hdGlvbmNvZGU6ICRzdGF0ZVBhcmFtcy5jb2RlfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2xvZ2luJywge21lc3NhZ2U6ICdUaGFuayB5b3UhIFlvdSBhY2NvdW50IGhhcyBiZWVuIGFjdGl2YXRlZCEnfSk7XHJcblxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHJlc3BvbnNlLnN0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3IgPSBcIkludmFsaWQgY29uZmlybWF0aW9uIGNvZGUuXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvciA9IFwiU29tZXRoaW5nIHdlbnQgd3JvbmcuIFBsZWFzZSwgdHJ5IGFnYWluIGxhdHRlci5cIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAuY29udHJvbGxlcnMnKS5jb250cm9sbGVyKCdBdXRoQ29udHJvbGxlcicsIEF1dGhDb250cm9sbGVyKTtcclxuICAgIGZ1bmN0aW9uIEF1dGhDb250cm9sbGVyKCRzY29wZSwgJGF1dGgsICRzdGF0ZSwgJHN0YXRlUGFyYW1zLCBUb2FzdFNlcnZpY2UpIHtcclxuXHJcbiAgICAgICAgJHNjb3BlLnVzZXIgPSB7fTtcclxuICAgICAgICAkc2NvcGUuZXJyb3IgPSBudWxsO1xyXG4gICAgICAgIHZhciB0b2FzdCA9IHt9O1xyXG5cclxuICAgICAgICBpZiAoJHN0YXRlUGFyYW1zLm1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgdG9hc3QuY29udGVudCA9ICRzdGF0ZVBhcmFtcy5tZXNzYWdlO1xyXG4gICAgICAgICAgICBUb2FzdFNlcnZpY2Uuc2hvdyh0b2FzdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkc2NvcGUubG9naW4gPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAkYXV0aC5sb2dpbigkc2NvcGUudXNlcikudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnbWFpbicpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHJlc3BvbnNlLnN0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQwMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvciA9IFwiU29ycnksIHdlIGNvdWxkbid0IGZpbmQgYW4gYWNjb3VudCB3aXRoIHByb3ZpZGVkIHVzZXJuYW1lIG9yIHBhc3N3b3JkIGlzIHdyb25nLlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yID0gXCJZb3UgYWNjb3VudCBpcyBub3QgdmVyaWZpZWQuIFBsZWFzZSwgY2hlY2sgeW91ciBlbWFpbC4gSWYgeW91IGhhdmUgYW55IHRyb3VibGVzIC0gcGxlYXNlLCBjb250YWN0IHVzLlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNTAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yID0gXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3IuXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvciA9IFwiU29tZXRoaW5nIHdlbnQgd3JvbmcuIFBsZWFzZSwgdHJ5IGFnYWluIGxhdHRlci5cIjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLmNvbnRyb2xsZXJzJykuY29udHJvbGxlcignUGFzc3dvcmRSZXNldENvbnRyb2xsZXInLCBQYXNzd29yZFJlc2V0Q29udHJvbGxlcik7XHJcbiAgICBmdW5jdGlvbiBQYXNzd29yZFJlc2V0Q29udHJvbGxlcigkc2NvcGUsICRzdGF0ZSwgJHN0YXRlUGFyYW1zLCBSZXN0YW5ndWxhcikge1xyXG5cclxuICAgICAgICAkc2NvcGUucGFzc3dvcmRSZXNldCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJHNjb3BlLlVzZXIudG9rZW4gPSAkc3RhdGVQYXJhbXMuY29kZTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLlVzZXIpO1xyXG4gICAgICAgICAgICBSZXN0YW5ndWxhci5hbGwoJ2FwaS9hdXRoL3Jlc2V0Y29uZmlybScpLnBvc3QoJHNjb3BlLlVzZXIpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnbG9naW4nLCB7bWVzc2FnZTogJ1lvdXIgcGFzc3dvcmQgaGFzIGJlZW4gY2hhbmdlZCEnfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHJlc3BvbnNlLnN0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQwMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvciA9IFwiSW52YWxpZCBjb25maXJtYXRpb24gY29kZS5cIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yID0gXCJTb21ldGhpbmcgd2VudCB3cm9uZy4gUGxlYXNlLCB0cnkgYWdhaW4gbGF0dGVyLlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAuY29udHJvbGxlcnMnKS5jb250cm9sbGVyKCdSZXN0b3JlQ29udHJvbGxlcicsIFJlc3RvcmVDb250cm9sbGVyKTtcclxuICAgIGZ1bmN0aW9uIFJlc3RvcmVDb250cm9sbGVyKCRzY29wZSwgJHN0YXRlLCBUb2FzdFNlcnZpY2UsIFJlc3Rhbmd1bGFyKSB7XHJcblxyXG4gICAgICAgICRzY29wZS5yZXN0b3JlZFVzZXIgPSB7fTtcclxuICAgICAgICB2YXIgdG9hc3QgPSB7fTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnJlc3RvcmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIFJlc3Rhbmd1bGFyLmFsbCgnYXBpL2F1dGgvcmVzZXQnKS5wb3N0KHtlbWFpbDogJHNjb3BlLnJlc3RvcmVkVXNlci5lbWFpbH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnbG9naW4nLCB7bWVzc2FnZTogJ01lc3NhZ2UgaGF2ZSBiZWVuIHNlbmQuIFBsZWFzZSwgY2hlY2sgeW91ciBlbWFpbC4nfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHJlc3BvbnNlLnN0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQwMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvciA9IFwiRW1haWwgbm90IGZvdW5kLlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3IgPSBcIlNvbWV0aGluZyB3ZW50IHdyb25nLiBQbGVhc2UsIHRyeSBhZ2FpbiBsYXR0ZXIuXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAuY29udHJvbGxlcnMnKS5jb250cm9sbGVyKCdSZWdpc3RlckNvbnRyb2xsZXInLCBSZWdpc3RlckNvbnRyb2xsZXIpO1xyXG4gICAgZnVuY3Rpb24gUmVnaXN0ZXJDb250cm9sbGVyKCRzY29wZSwgJGF1dGgsICRzdGF0ZSkgeyAvLywgVG9hc3RTZXJ2aWNlXHJcblxyXG4gICAgICAgICRzY29wZS5uZXdVc2VyID0ge307XHJcbiAgICAgICAgJHNjb3BlLmVycm9yID0gbnVsbDtcclxuXHJcbiAgICAgICAgJHNjb3BlLnJlZ2lzdGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuZXJyb3IgPSBudWxsO1xyXG4gICAgICAgICAgICAkYXV0aC5zaWdudXAoJHNjb3BlLm5ld1VzZXIpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygndmVyaWZpY2F0aW9uc2VudCcsIHsnZW1haWwnOiAkc2NvcGUubmV3VXNlci5lbWFpbH0pO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHJlc3BvbnNlLnN0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQwOTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvciA9IFwiVXNlciB3aXRoIGdpdmVuIGVtYWlsIGFscmVhZHkgZXhpc3RzLlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNTAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yID0gXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3IuXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvciA9IFwiU29tZXRoaW5nIHdlbnQgd3JvbmcuIFBsZWFzZSwgdHJ5IGFnYWluIGxhdHRlci5cIjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAuY29udHJvbGxlcnMnKS5jb250cm9sbGVyKCdWZXJpZnlDb250cm9sbGVyJywgVmVyaWZ5Q29udHJvbGxlcik7XHJcbiAgICBmdW5jdGlvbiBWZXJpZnlDb250cm9sbGVyKCRzY29wZSwgJHN0YXRlLCAkc3RhdGVQYXJhbXMsIFJlc3Rhbmd1bGFyKSB7XHJcblxyXG4gICAgICAgIFJlc3Rhbmd1bGFyLmFsbCgnYXBpL2F1dGgvdmVyaWZ5JykucG9zdCh7Y29uZmlybWF0aW9uY29kZTogJHN0YXRlUGFyYW1zLmNvZGV9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG5cclxuICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnbG9naW4nLCB7bWVzc2FnZTogJ1RoYW5rIHlvdSEgWW91IGFjY291bnQgaGFzIGJlZW4gYWN0aXZhdGVkISd9KTtcclxuXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAocmVzcG9uc2Uuc3RhdHVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0MDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvciA9IFwiSW52YWxpZCBjb25maXJtYXRpb24gY29kZS5cIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yID0gXCJTb21ldGhpbmcgd2VudCB3cm9uZy4gUGxlYXNlLCB0cnkgYWdhaW4gbGF0dGVyLlwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbn0pKCk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
